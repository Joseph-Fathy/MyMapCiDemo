name: upload build to firebase distribution
on:
  push:
    branches: [ main ]

jobs :
    build:
      runs-on: ubuntu-latest
      steps:
        - name: checkout
          uses: actions/checkout@v2

        - name: setup-java
          uses: actions/setup-java@v2
          with:
            distribution: 'temurin'
            java-version: '11'

        - name: build-apk
          run: ./gradlew assembleDebug

        - name: upload artifact to Firebase App Distribution
          uses: wzieba/Firebase-Distribution-Github-Action@v1
          with:
            appId: ${{secrets.FIREBASE_APP_ID}}
            token: ${{secrets.FIREBASE_TOKEN}}
            groups: testers
            file: app/build/outputs/apk/debug/app-debug.apk
